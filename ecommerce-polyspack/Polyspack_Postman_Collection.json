{
  "info": {
    "name": "Polyspack Enterprises API",
    "description": "Complete API collection for Polyspack E-commerce platform including authentication, products, orders, admin management, and payment verification.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "polyspack-api"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "https://polyspackenterprises.co.ke/api",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "product_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "order_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "category_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+254700000000\",\n  \"password\": \"SecurePass123!\",\n  \"addresses\": [\n    {\n      \"street\": \"123 Main St\",\n      \"city\": \"Nairobi\",\n      \"county\": \"Nairobi\",\n      \"country\": \"Kenya\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": ["{{base_url}}"],
              "path": ["auth", "register"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/auth/register",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "register"]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"User registered successfully\",\n  \"data\": {\n    \"user\": {\n      \"_id\": \"64f1a2b3c4d5e6f7g8h9i0j\",\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\",\n      \"role\": \"customer\",\n      \"isActive\": true\n    },\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Login User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"janekamunge4@gmail.com\",\n  \"password\": \"Thamanda@2025\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/auth/login",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "login"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"Login successful\",\n  \"data\": {\n    \"user\": {\n      \"_id\": \"64f1a2b3c4d5e6f7g8h9i0j\",\n      \"name\": \"Jane Mumbi\",\n      \"email\": \"janekamunge4@gmail.com\",\n      \"role\": \"admin\",\n      \"avatar\": \"https://cloudinary.com/avatar.jpg\"\n    },\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"refreshToken\": \"refresh_token_here\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["auth", "refresh"]
            }
          }
        },
        {
          "name": "Logout User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/logout",
              "host": ["{{base_url}}"],
              "path": ["auth", "logout"]
            }
          }
        },
        {
          "name": "Forgot Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/forgot-password",
              "host": ["{{base_url}}"],
              "path": ["auth", "forgot-password"]
            }
          }
        },
        {
          "name": "Reset Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"reset_token_from_email\",\n  \"password\": \"NewSecurePass123!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/reset-password",
              "host": ["{{base_url}}"],
              "path": ["auth", "reset-password"]
            }
          }
        }
      ]
    },
    {
      "name": "Products",
      "item": [
        {
          "name": "Get All Products",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/products?page=1&limit=10&category=seedlings&search=premium",
              "host": ["{{base_url}}"],
              "path": ["products"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "category",
                  "value": "seedlings"
                },
                {
                  "key": "search",
                  "value": "premium"
                }
              ]
            }
          }
        },
        {
          "name": "Get Product by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/products/{{product_id}}",
              "host": ["{{base_url}}"],
              "path": ["products", "{{product_id}}"]
            }
          }
        },
        {
          "name": "Create Product (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Premium Seedling Bags\",\n  \"description\": \"High-quality seedling bags for optimal plant growth\",\n  \"price\": 2500,\n  \"category\": \"64f1a2b3c4d5e6f7g8h9i0k\",\n  \"sku\": \"PSB-001\",\n  \"stock\": 100,\n  \"images\": [\n    \"https://cloudinary.com/image1.jpg\",\n    \"https://cloudinary.com/image2.jpg\"\n  ],\n  \"specifications\": {\n    \"size\": \"10x15cm\",\n    \"material\": \"Biodegradable plastic\",\n    \"pack_size\": \"100 bags\"\n  },\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/products",
              "host": ["{{base_url}}"],
              "path": ["admin", "products"]
            }
          }
        },
        {
          "name": "Update Product (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Premium Seedling Bags - Updated\",\n  \"price\": 2700,\n  \"stock\": 95\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/products/{{product_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "products", "{{product_id}}"]
            }
          }
        },
        {
          "name": "Delete Product (Admin)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/products/{{product_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "products", "{{product_id}}"]
            }
          }
        },
        {
          "name": "Get Product Categories",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/products/categories",
              "host": ["{{base_url}}"],
              "path": ["products", "categories"]
            }
          }
        }
      ]
    },
    {
      "name": "Categories (Admin)",
      "item": [
        {
          "name": "Get All Categories",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/categories",
              "host": ["{{base_url}}"],
              "path": ["admin", "categories"]
            }
          }
        },
        {
          "name": "Create Category",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Fertilizers\",\n  \"description\": \"NPK and organic fertilizers for optimal plant nutrition\",\n  \"image\": \"https://cloudinary.com/fertilizer-category.jpg\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/categories",
              "host": ["{{base_url}}"],
              "path": ["admin", "categories"]
            }
          }
        },
        {
          "name": "Update Category",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Fertilizers & Nutrients\",\n  \"description\": \"Updated description for fertilizers category\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/categories/{{category_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "categories", "{{category_id}}"]
            }
          }
        },
        {
          "name": "Delete Category",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/categories/{{category_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "categories", "{{category_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Create Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"product\": \"{{product_id}}\",\n      \"quantity\": 2,\n      \"price\": 2500\n    }\n  ],\n  \"shippingAddress\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"Nairobi\",\n    \"county\": \"Nairobi\",\n    \"country\": \"Kenya\"\n  },\n  \"paymentMethod\": \"mpesa\",\n  \"notes\": \"Please deliver between 9am-5pm\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/orders",
              "host": ["{{base_url}}"],
              "path": ["orders"]
            }
          }
        },
        {
          "name": "Get User Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/orders?page=1&limit=10&status=pending",
              "host": ["{{base_url}}"],
              "path": ["orders"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "status",
                  "value": "pending"
                }
              ]
            }
          }
        },
        {
          "name": "Get Order by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/orders/{{order_id}}",
              "host": ["{{base_url}}"],
              "path": ["orders", "{{order_id}}"]
            }
          }
        },
        {
          "name": "Get All Orders (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/orders?page=1&limit=20&status=all",
              "host": ["{{base_url}}"],
              "path": ["admin", "orders"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "all"
                }
              ]
            }
          }
        },
        {
          "name": "Update Order Status (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"confirmed\",\n  \"notes\": \"Order confirmed and ready for processing\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/orders/{{order_id}}/status",
              "host": ["{{base_url}}"],
              "path": ["admin", "orders", "{{order_id}}", "status"]
            }
          }
        }
      ]
    },
    {
      "name": "Payments",
      "item": [
        {
          "name": "Verify M-Pesa Payment (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": \"{{order_id}}\",\n  \"mpesaCode\": \"RF123456789\",\n  \"amount\": 5000,\n  \"phoneNumber\": \"+254700000000\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/payments/verify-mpesa",
              "host": ["{{base_url}}"],
              "path": ["admin", "payments", "verify-mpesa"]
            }
          }
        },
        {
          "name": "Get Payment Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/payments/{{order_id}}/status",
              "host": ["{{base_url}}"],
              "path": ["payments", "{{order_id}}", "status"]
            }
          }
        },
        {
          "name": "Get All Payments (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/payments?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "payments"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Users (Admin)",
      "item": [
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/users?page=1&limit=20&role=customer",
              "host": ["{{base_url}}"],
              "path": ["admin", "users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "role",
                  "value": "customer"
                }
              ]
            }
          }
        },
        {
          "name": "Update User Role",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"sales\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/users/{{user_id}}/role",
              "host": ["{{base_url}}"],
              "path": ["admin", "users", "{{user_id}}", "role"]
            }
          }
        },
        {
          "name": "Toggle User Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isActive\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/users/{{user_id}}/status",
              "host": ["{{base_url}}"],
              "path": ["admin", "users", "{{user_id}}", "status"]
            }
          }
        }
      ]
    },
    {
      "name": "Profile Management",
      "item": [
        {
          "name": "Get User Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/profile",
              "host": ["{{base_url}}"],
              "path": ["auth", "profile"]
            }
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"phone\": \"+254711111111\",\n  \"addresses\": [\n    {\n      \"street\": \"456 Updated St\",\n      \"city\": \"Nairobi\",\n      \"county\": \"Nairobi\",\n      \"country\": \"Kenya\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/profile",
              "host": ["{{base_url}}"],
              "path": ["auth", "profile"]
            }
          }
        },
        {
          "name": "Upload Avatar",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "avatar",
                  "type": "file",
                  "src": []
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/auth/upload-avatar",
              "host": ["{{base_url}}"],
              "path": ["auth", "upload-avatar"]
            }
          }
        },
        {
          "name": "Change Password",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"CurrentPass123!\",\n  \"newPassword\": \"NewSecurePass456!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/change-password",
              "host": ["{{base_url}}"],
              "path": ["auth", "change-password"]
            }
          }
        }
      ]
    },
    {
      "name": "Coupons & Promotions (Admin)",
      "item": [
        {
          "name": "Get All Coupons",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/coupons",
              "host": ["{{base_url}}"],
              "path": ["admin", "coupons"]
            }
          }
        },
        {
          "name": "Create Coupon",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"FERT20\",\n  \"description\": \"20% off on fertilizers\",\n  \"discountType\": \"percentage\",\n  \"discountValue\": 20,\n  \"maxDiscount\": 2000,\n  \"minOrderValue\": 5000,\n  \"usageLimit\": 100,\n  \"startDate\": \"2024-01-01T00:00:00Z\",\n  \"endDate\": \"2024-12-31T23:59:59Z\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/coupons",
              "host": ["{{base_url}}"],
              "path": ["admin", "coupons"]
            }
          }
        },
        {
          "name": "Update Coupon",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"usageLimit\": 50,\n  \"isActive\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/coupons/{{coupon_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "coupons", "{{coupon_id}}"]
            }
          }
        },
        {
          "name": "Delete Coupon",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/coupons/{{coupon_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "coupons", "{{coupon_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Analytics & Reports (Admin)",
      "item": [
        {
          "name": "Get Dashboard Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/dashboard/stats",
              "host": ["{{base_url}}"],
              "path": ["admin", "dashboard", "stats"]
            }
          }
        },
        {
          "name": "Get Sales Report",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/analytics/sales?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{base_url}}"],
              "path": ["admin", "analytics", "sales"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31"
                }
              ]
            }
          }
        },
        {
          "name": "Get Top Products",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/analytics/top-products?limit=10",
              "host": ["{{base_url}}"],
              "path": ["admin", "analytics", "top-products"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Website Settings (Admin)",
      "item": [
        {
          "name": "Get Website Settings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/website/settings",
              "host": ["{{base_url}}"],
              "path": ["admin", "website", "settings"]
            }
          }
        },
        {
          "name": "Update Website Settings",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"companyName\": \"Polyspack Enterprises Ltd\",\n  \"companyEmail\": \"info@polyspackenterprises.co.ke\",\n  \"companyPhone\": \"+254700000000\",\n  \"companyAddress\": \"Nairobi, Kenya\",\n  \"socialLinks\": {\n    \"facebook\": \"https://facebook.com/polyspack\",\n    \"twitter\": \"https://twitter.com/polyspack\",\n    \"instagram\": \"https://instagram.com/polyspack\"\n  },\n  \"shippingFee\": 500,\n  \"freeShippingThreshold\": 10000\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/website/settings",
              "host": ["{{base_url}}"],
              "path": ["admin", "website", "settings"]
            }
          }
        },
        {
          "name": "Upload Company Logo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "logo",
                  "type": "file",
                  "src": []
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/admin/website/upload-logo",
              "host": ["{{base_url}}"],
              "path": ["admin", "website", "upload-logo"]
            }
          }
        }
      ]
    },
    {
      "name": "Health & System",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            }
          }
        },
        {
          "name": "Get System Info (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/system/info",
              "host": ["{{base_url}}"],
              "path": ["admin", "system", "info"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-set auth_token from login response",
          "if (pm.response && pm.response.code === 200) {",
          "    const response = pm.response.json();",
          "    if (response.data && response.data.token) {",
          "        pm.collectionVariables.set('auth_token', response.data.token);",
          "    }",
          "    if (response.data && response.data.refreshToken) {",
          "        pm.collectionVariables.set('refresh_token', response.data.refreshToken);",
          "    }",
          "    if (response.data && response.data.user && response.data.user._id) {",
          "        pm.collectionVariables.set('user_id', response.data.user._id);",
          "    }",
          "}"
        ]
      }
    }
  ]
}
